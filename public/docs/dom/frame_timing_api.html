<h1>Frame Timing API</h1>
<div class="notecard experimental"> <strong id="experimental">Experimental</strong> <p><strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Guidelines/Conventions_definitions#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p> </div> <p>The <code>PerformanceFrameTiming</code> interface provides <em>frame</em> timing data about the browser's event loop. A <em>frame</em> represents the amount of work a browser does in <a href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8" rel=" noopener">one event loop iteration</a> such as processing DOM events, resizing, scrolling, rendering, CSS animations, etc. A <em>frame rate</em> of 60 fps (frames per second) for a 60 Hz refresh rate is a common target for a good <em>responsive</em> user experience. This means the browser should process a frame in about 16.7 ms.</p> <p>An application can register a <a href="performanceobserver"><code>PerformanceObserver</code></a> for "<code>frame</code>" <a href="performanceentry"><code>performance entry types</code></a>. The <em>observer</em> (callback) will be notified when new "<code>frame</code>" events are added to the browser's <em>performance timeline</em> and the frame's <a href="performanceentry/duration"><code>duration</code></a> (length of time) will be available. This data can be used to help identify areas that take too long to provide a good user experience.</p> <p>Example code of the interfaces described in this document is included in <em><a href="frame_timing_api/using_the_frame_timing_api">Using the Frame Timing API</a></em>.</p>
<h2 id="performance_frames">Performance <code>frames</code>
</h2>
<p>The <a href="performanceframetiming"><code>PerformanceFrameTiming</code></a> interface extends the following <a href="performanceentry"><code>PerformanceEntry</code></a> properties (for "<code>frame</code>" <a href="performanceentry/entrytype"><code>performance entry types</code></a>) by qualifying and constrainting the properties as follows:</p> <dl> <dt><a href="performanceentry/entrytype"><code>PerformanceEntry.entryType</code></a></dt> <dd>Set to "<code>frame</code>".</dd> <dt><a href="performanceentry/name"><code>PerformanceEntry.name</code></a></dt> <dd>Set to the <a href="https://dom.spec.whatwg.org/#concept-document-url" rel=" noopener">document's address</a>.</dd> <dt><a href="performanceentry/starttime"><code>PerformanceEntry.startTime</code></a></dt> <dd>Set to the <a href="domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> when the frame was started.</dd> <dt><a href="performanceentry/duration"><code>PerformanceEntry.duration</code></a></dt> <dd>Set to a <a href="domhighrestimestamp"><code>timestamp</code></a> indicating the difference between the <code>startTime</code>s of two successive frames.</dd> </dl> <p>This data, particularly the <code>duration</code> timestamp, can be used to help identify performance problems.</p>
<h2 id="frame_observers">Frame observers</h2>
<p><span class="icon experimental" viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" role="img"> This is an experimental API that should not be used in production code.  </span>The <em>performance observer</em> interfaces allow an application to register an <em>observer</em> for specific <a href="performanceentry"><code>performance event types</code></a>. When one of those event types is recorded in the browser's <em>performance timeline</em>, the application is notified of the event via the observer's callback function that was specified when the observer was created.</p> <p>To observe "<code>frame</code>" performance entry types, the application first creates a <a href="performanceobserver"><code>PerformanceObserver</code></a> object with a specific frame observer callback (function). Next, <a href="performanceobserver/observe"><code>PerformanceObserver.observe()</code></a> is used to specify the set of performance events to observe - in this case, just the "<code>frame</code>" event type. When the browser adds a new frame to the performance timeline, the specified observer callback will be invoked.</p>
<h2 id="accessing_frame_data">Accessing frame data</h2>
<p>When a frame <a href="performanceobserver"><code>observer</code></a> is invoked, frame <a href="performanceentry"><code>performance entries</code></a> can be retrieved by calling <a href="performanceobserverentrylist/getentriesbytype"><code>PerformanceObserverEntryList.getEntriesByType()</code></a> with an argument of "<code>frame</code>". This method returns a list of "<code>frame</code>" <a href="performanceentry"><code>PerformanceEntry</code></a> objects. Each frame object's <a href="performanceentry/duration"><code>duration</code></a> property returns the timestamp of two consecutive frames. If this value is greater than the time needed to provide a good user experience, further analysis might be warranted.</p>
<h2 id="browser_compatibility">Browser compatibility</h2>
<h2 id="see_also">See also</h2>
<ul> <li><a href="https://developer.mozilla.org/en-US/docs/Tools/Performance/Frame_rate">Frame Rate (Firefox Performance Tool)</a></li> <li><a href="frame_timing_api/using_the_frame_timing_api">Using the Frame Timing API</a></li> </ul>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Frame_Timing_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Frame_Timing_API</a>
  </p>
</div>
