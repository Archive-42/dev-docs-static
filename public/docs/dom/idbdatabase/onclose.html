<h1>IDBDatabase.onclose</h1>

  <p>The <code>onclose</code> event handler of the <a href="../idbdatabase"><code>IDBDatabase</code></a> interface handles the <code><a href="../htmldialogelement/close_event">close</a></code> event, which is fired when the database is unexpectedly closed. This can happen, for example, when the application is shut down or access to the disk the database is stored on is lost while the database is open.</p> <p>The <code><a href="../htmldialogelement/close_event">close</a></code> event is fired after all transactions have been aborted and the connection has been closed.</p> 
<div class="notecard note"> <p><strong>Note:</strong> This feature is available in <a href="../web_workers_api">Web Workers</a>.</p> </div>
 <h2 id="syntax">Syntax</h2>
<pre data-language="js">IDBDatabase<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></pre>
<h3 id="value">Value</h3>
<p>A function which is called when the <code><a href="../htmldialogelement/close_event">close</a></code> event is fired.</p>
<h2 id="example">Example</h2>
<pre data-language="js">db<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">myAppShowAlert</span><span class="token punctuation">(</span><span class="token string">'The database "'</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'" has unexpectedly closed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://www.w3.org/TR/IndexedDB/#dom-idbdatabase-onclose" hreflang="en" rel=" noopener">Indexed Database API 2.0<br><small>The definition of 'onclose' in that specification.</small></a></td> <td><span class="spec-rec">Recommendation</span></td> <td></td> </tr> </tbody> </table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>onclose</code></th>
<td class="bc-supports-yes">
<div>31</div>
<div>approx</div>
</td>
<td class="bc-supports-yes"><div>≤18</div></td>
<td class="bc-supports-yes"><div>50</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>10.1</div></td>
<td class="bc-supports-yes"><div>≤37</div></td>
<td class="bc-supports-yes"><div>31</div></td>
<td class="bc-supports-yes"><div>50</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>10.3</div></td>
<td class="bc-supports-yes"><div>2.0</div></td>
</tr></tbody>
</table>


<h2 id="see_also">See also</h2>
<ul> <li><a href="../indexeddb_api/using_indexeddb">Using IndexedDB</a></li> <li><a href="../idbdatabase"><code>IDBDatabase</code></a></li> <li>
<a href="close_event">close</a> event</li> </ul>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBDatabase/onclose" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/IDBDatabase/onclose</a>
  </p>
</div>
