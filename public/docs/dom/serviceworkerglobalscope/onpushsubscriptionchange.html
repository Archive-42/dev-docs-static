<h1>ServiceWorkerGlobalScope.onpushsubscriptionchange</h1> <p>The <code><strong>ServiceWorkerGlobalScope.onpushsubscriptionchange</strong></code> event of the <a href="../serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> interface is fired to indicate a change in push subscription that was triggered outside the application's control, e.g. when browser refresh the push subscription.</p> <p>Previously, it was defined as the event interface that is fired whenever a push subscription has been invalidated (or is about to become so). This offers an opportunity to resubscribe in order to continue receiving push messages, if desired. This might happen if, for example, the push service sets an expiration time a subscription.</p>
<h2 id="syntax">Syntax</h2>
<pre data-language="js">ServiceWorkerGlobalScope<span class="token punctuation">.</span><span class="token function-variable function">onpushsubscriptionchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pushsubscriptionchange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre>
<h2 id="example">Example</h2>
<pre data-language="js">self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pushsubscriptionchange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something, usually resubscribe to push and</span>
  <span class="token comment">// send the new subscription details back to the</span>
  <span class="token comment">// server via XHR or Fetch</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://w3c.github.io/push-api/#dom-serviceworkerglobalscope-onpushsubscriptionchange" hreflang="en" rel=" noopener">Push API<br><small>The definition of 'onpushsubscriptionchange' in that specification.</small></a></td> <td><span class="spec-wd">Working Draft</span></td> <td>Initial definition (Note: This event is specified in the Push API, but accessed through <a href="../serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a>.)</td> </tr> </tbody> </table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>onpushsubscriptionchange</code></th>
<td class="bc-supports-yes"><div>40</div></td>
<td class="bc-supports-yes"><div>â‰¤79</div></td>
<td class="bc-supports-yes">
<div>44</div>
<div>
<a href="https://www.mozilla.org/en-US/firefox/organizations/">Extended Support Releases (ESR)</a> before Firefox 78 ESR do not support service workers and the Push API.</div>
</td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>24</div></td>
<td class="bc-supports-yes"><div>11.1</div></td>
<td class="bc-supports-yes"><div>40</div></td>
<td class="bc-supports-yes"><div>40</div></td>
<td class="bc-supports-yes"><div>44</div></td>
<td class="bc-supports-yes"><div>24</div></td>
<td class="bc-supports-yes"><div>11.3</div></td>
<td class="bc-supports-yes"><div>4.0</div></td>
</tr></tbody>
</table>


<h2 id="see_also">See also</h2>
<ul> <li><a href="../push_api">Push API</a></li> </ul>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/onpushsubscriptionchange" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/onpushsubscriptionchange</a>
  </p>
</div>
