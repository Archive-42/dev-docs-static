<h1>Element.classList</h1> <p>The <code><strong>Element.classList</strong></code> is a read-only property that returns a live <a href="../domtokenlist"><code>DOMTokenList</code></a> collection of the <code>class</code> attributes of the element. This can then be used to manipulate the class list.</p> <p>Using <code>classList</code> is a convenient alternative to accessing an element's list of classes as a space-delimited string via <a href="classname"><code>element.className</code></a>.</p>
<h2 id="syntax">Syntax</h2>
<pre data-language="js"><span class="token keyword">const</span> elementClasses <span class="token operator">=</span> elementNodeReference<span class="token punctuation">.</span>classList<span class="token punctuation">;</span>
</pre>
<h3 id="returns">Returns</h3>
<p>A <a href="../domtokenlist"><code>DOMTokenList</code></a> representing the contents of the element's <code>class</code> attribute. If the <code>class</code> attribute is not set or empty, it returns an empty <code>DOMTokenList</code>, i.e. a <code>DOMTokenList</code> with the <code>length</code> property equal to <code>0</code>.</p> <p>The <code>DOMTokenList</code> itself is read-only, although you can modify it using the <a href="../domtokenlist/add"><code>add()</code></a> and <a href="../domtokenlist/remove"><code>remove()</code></a> methods.</p>
<h2 id="examples">Examples</h2>
<pre data-language="js"><span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>

<span class="token comment">// our starting state: &lt;div class="foo"&gt;&lt;/div&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use the classList API to remove and add classes</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"anotherclass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &lt;div class="anotherclass"&gt;&lt;/div&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// if visible is set remove it, otherwise add it</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"visible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add/remove visible, depending on test conditional, i less than 10</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"visible"</span><span class="token punctuation">,</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add or remove multiple classes</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token string">"baz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token string">"baz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add or remove multiple classes using spread syntax</span>
<span class="token keyword">const</span> cls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token operator">...</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// replace class "foo" with class "bar"</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre> <div class="note notecard"> <p>Versions of Firefox before 26 do not implement the use of several arguments in the add/remove/toggle methods. See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=814014" rel=" noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=814014</a> </p> </div>
<h2 id="polyfill">Polyfill</h2>
<p>The legacy <code><a href="https://msdn.microsoft.com/en-us/windows/ms536956(v=vs.71)" rel=" noopener">onpropertychange</a></code> event can be used to create a living <code>classList</code> mockup thanks to a <code>Element.prototype.className</code> property that fires the specified event once it is changed.</p> <p>The following polyfill for both <code>classList</code> and <code>DOMTokenList</code> ensures <strong>full</strong> compliance (coverage) for all standard methods and properties of <code>Element.prototype.classList</code> for <strong>IE10</strong>-<strong>IE11</strong> browsers plus <em>nearly</em> compliant behavior for <strong>IE 6-9</strong>. Check it out:</p> <pre data-language="js"><span class="token comment">// 1. String.prototype.trim polyfill</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span>trim<span class="token punctuation">)</span> <span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\s]+|[\s]+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">"use strict"</span><span class="token punctuation">;</span> <span class="token comment">// prevent global namespace pollution</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>DOMException<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function-variable function">DOMException</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> reason<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> wsRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\11\12\14\15\40]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> wsIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function-variable function">checkIfValidClassListEntry</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">O</span><span class="token punctuation">,</span> <span class="token constant">V</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">V</span> <span class="token operator">===</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DOMException</span><span class="token punctuation">(</span>
    <span class="token string">"Failed to execute '"</span> <span class="token operator">+</span> <span class="token constant">O</span> <span class="token operator">+</span> <span class="token string">"' on 'DOMTokenList': The token provided must not be empty."</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>wsIndex<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DOMException</span><span class="token punctuation">(</span><span class="token string">"Failed to execute '"</span><span class="token operator">+</span><span class="token constant">O</span><span class="token operator">+</span><span class="token string">"' on 'DOMTokenList': "</span> <span class="token operator">+</span>
    <span class="token string">"The token provided ('"</span><span class="token operator">+</span><span class="token constant">V</span><span class="token punctuation">[</span>wsIndex<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"') contains HTML space characters, which are not valid in tokens."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2. Implement the barebones DOMTokenList livelyness polyfill</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> DOMTokenList <span class="token operator">!==</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> document <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">,</span> Object <span class="token operator">=</span> window<span class="token punctuation">.</span>Object<span class="token punctuation">,</span> hasOwnProp <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">;</span>
    <span class="token keyword">var</span> defineProperty <span class="token operator">=</span> Object<span class="token punctuation">.</span>defineProperty<span class="token punctuation">,</span> allowTokenListConstruction <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">DOMTokenList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>allowTokenListConstruction<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token string">"Illegal constructor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// internally let it through</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toLocaleString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        a<span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> v<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> argLen<span class="token operator">=</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>val<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ele<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>proto<span class="token operator">=</span>ele<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> v<span class="token operator">!==</span>argLen<span class="token punctuation">;</span> <span class="token operator">++</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            val <span class="token operator">=</span> arguments<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Len<span class="token operator">=</span>proto<span class="token punctuation">.</span>length<span class="token punctuation">,</span> resStr<span class="token operator">=</span>val<span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span> <span class="token keyword">else</span> resStr <span class="token operator">+=</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">[</span>Len<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">,</span> proto<span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">,</span> proto<span class="token punctuation">.</span>value <span class="token operator">=</span> resStr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ele<span class="token punctuation">.</span>className <span class="token operator">=</span> proto<span class="token punctuation">.</span>value<span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> v<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> argLen<span class="token operator">=</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>val<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ele<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>proto<span class="token operator">=</span>ele<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> v <span class="token operator">!==</span> argLen<span class="token punctuation">;</span> <span class="token operator">++</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            val <span class="token operator">=</span> arguments<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"remove"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Len<span class="token operator">=</span>proto<span class="token punctuation">.</span>length<span class="token punctuation">,</span> resStr<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span> is<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span> resStr<span class="token operator">+=</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> is<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>is<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">[</span>Len<span class="token punctuation">]</span><span class="token punctuation">,</span> proto<span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">,</span> proto<span class="token punctuation">.</span>value <span class="token operator">=</span> resStr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ele<span class="token punctuation">.</span>className <span class="token operator">=</span> proto<span class="token punctuation">.</span>value<span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>DOMTokenList <span class="token operator">=</span> DOMTokenList<span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">whenPropChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> evt <span class="token operator">=</span> window<span class="token punctuation">.</span>event<span class="token punctuation">,</span> prop <span class="token operator">=</span> evt<span class="token punctuation">.</span>propertyName<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>skipPropChange <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>prop<span class="token operator">===</span><span class="token string">"className"</span> <span class="token operator">||</span> <span class="token punctuation">(</span>prop<span class="token operator">===</span><span class="token string">"classList"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>defineProperty<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> target <span class="token operator">=</span> evt<span class="token punctuation">.</span>srcElement<span class="token punctuation">,</span> protoObjProto <span class="token operator">=</span> target<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> strval <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> tokens<span class="token operator">=</span>strval<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">,</span> resTokenList<span class="token operator">=</span>target<span class="token punctuation">[</span>prop<span class="token operator">===</span><span class="token string">"classList"</span><span class="token operator">?</span><span class="token string">" uCL"</span><span class="token operator">:</span><span class="token string">"classList"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> oldLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            a<span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> cI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length <span class="token operator">=</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">,</span> sub <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> cI <span class="token operator">!==</span> cLen<span class="token punctuation">;</span> <span class="token operator">++</span>cI<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> innerI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> innerI<span class="token operator">!==</span>cI<span class="token punctuation">;</span> <span class="token operator">++</span>innerI<span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>innerI<span class="token punctuation">]</span><span class="token operator">===</span>tokens<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>sub<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span>
                resTokenList<span class="token punctuation">[</span>cI<span class="token operator">-</span>sub<span class="token punctuation">]</span> <span class="token operator">=</span> tokens<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span>cLen<span class="token operator">-</span>sub<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> oldLen<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">delete</span> resTokenList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//remove trailing indexes</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>prop <span class="token operator">!==</span> <span class="token string">"classList"</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span>classList <span class="token operator">=</span> resTokenList<span class="token punctuation">,</span> target<span class="token punctuation">.</span>className <span class="token operator">=</span> strval<span class="token punctuation">;</span>
            skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> resTokenList<span class="token punctuation">.</span>length <span class="token operator">=</span> tokens<span class="token punctuation">.</span>length <span class="token operator">-</span> sub<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">polyfillClassList</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ele <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"innerHTML"</span> <span class="token keyword">in</span> ele<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token string">"Illegal invocation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ele<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span> <span class="token string">"onpropertychange"</span><span class="token punctuation">,</span> whenPropChanges <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prevent duplicate handler infinite loop</span>
        allowTokenListConstruction <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span> <span class="token keyword">function</span> <span class="token function">protoObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> protoObj<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMTokenList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">finally</span> <span class="token punctuation">{</span> allowTokenListConstruction <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span>
        <span class="token keyword">var</span> protoObjProto <span class="token operator">=</span> protoObj<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> resTokenList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">protoObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> toks<span class="token operator">=</span>ele<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">,</span> cI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> cLen<span class="token operator">=</span>toks<span class="token punctuation">.</span>length<span class="token punctuation">,</span> sub<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> cI <span class="token operator">!==</span> cLen<span class="token punctuation">;</span> <span class="token operator">++</span>cI<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> innerI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> innerI <span class="token operator">!==</span> cI<span class="token punctuation">;</span> <span class="token operator">++</span>innerI<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>toks<span class="token punctuation">[</span>innerI<span class="token punctuation">]</span> <span class="token operator">===</span> toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> sub<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">[</span>cI<span class="token operator">-</span>sub<span class="token punctuation">]</span> <span class="token operator">=</span> toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        protoObjProto<span class="token punctuation">.</span>length <span class="token operator">=</span> cLen<span class="token operator">-</span>sub<span class="token punctuation">,</span> protoObjProto<span class="token punctuation">.</span>value <span class="token operator">=</span> ele<span class="token punctuation">.</span>className<span class="token punctuation">,</span> protoObjProto<span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span> <span class="token operator">=</span> ele<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>defineProperty<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> <span class="token string">"classList"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// IE8 &amp; IE9 allow defineProperty on the DOM</span>
            enumerable<span class="token operator">:</span>   <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> resTokenList<span class="token punctuation">}</span><span class="token punctuation">,</span>
            configurable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ele<span class="token punctuation">.</span>className <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>newVal <span class="token operator">+=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> toks <span class="token operator">=</span> newVal<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">,</span> oldLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
                a<span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> cI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length <span class="token operator">=</span> toks<span class="token punctuation">.</span>length<span class="token punctuation">,</span> sub <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> cI <span class="token operator">!==</span> cLen<span class="token punctuation">;</span> <span class="token operator">++</span>cI<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> innerI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> innerI<span class="token operator">!==</span>cI<span class="token punctuation">;</span> <span class="token operator">++</span>innerI<span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>toks<span class="token punctuation">[</span>innerI<span class="token punctuation">]</span><span class="token operator">===</span>toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>sub<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span>
                    resTokenList<span class="token punctuation">[</span>cI<span class="token operator">-</span>sub<span class="token punctuation">]</span> <span class="token operator">=</span> toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span>cLen<span class="token operator">-</span>sub<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> oldLen<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">delete</span> resTokenList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//remove trailing indexes</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> <span class="token string">" uCLp"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// for accessing the hidden prototype</span>
            enumerable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> writeable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> value<span class="token operator">:</span> protoObj<span class="token punctuation">.</span>prototype
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span>protoObjProto<span class="token punctuation">,</span> <span class="token string">" uCL"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            enumerable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> writeable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> value<span class="token operator">:</span> ele
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> ele<span class="token punctuation">.</span>classList<span class="token operator">=</span>resTokenList<span class="token punctuation">,</span> ele<span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span><span class="token operator">=</span>resTokenList<span class="token punctuation">,</span> ele<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token operator">=</span>protoObj<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span> <span class="token string">"onpropertychange"</span><span class="token punctuation">,</span> whenPropChanges <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token comment">// Much faster &amp; cleaner version for IE8 &amp; IE9:</span>
        <span class="token comment">// Should work in IE8 because Element.prototype instanceof Node is true according to the specs</span>
        window<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">"classList"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            enumerable<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>   <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasOwnProp</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"classList"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">polyfillClassList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">;</span>
                             <span class="token punctuation">}</span><span class="token punctuation">,</span>
            configurable<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> val<span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Less performant fallback for older browsers (IE 6-8):</span>
        window<span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span> <span class="token operator">=</span> polyfillClassList<span class="token punctuation">;</span>
        <span class="token comment">// the below code ensures polyfillClassList is applied to all current and future elements in the doc.</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>styleSheet<span class="token punctuation">.</span>cssText<span class="token operator">=</span><span class="token punctuation">(</span>
            <span class="token string">'_*{x-uCLp:expression(!this.hasOwnProperty("classList")&amp;&amp;window[" uCL"](this))}'</span> <span class="token operator">+</span> <span class="token comment">//  IE6</span>
            <span class="token string">'[class]{x-uCLp/**/:expression(!this.hasOwnProperty("classList")&amp;&amp;window[" uCL"](this))}'</span> <span class="token comment">//IE7-8</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. Patch in unsupported methods in DOMTokenList</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">DOMTokenListProto<span class="token punctuation">,</span> testClass</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>item<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">item</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">NullCheck</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> n<span class="token operator">===</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> n<span class="token punctuation">}</span> <span class="token keyword">return</span> <span class="token function">NullCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>toggle <span class="token operator">||</span> testClass<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">!==</span><span class="token boolean">false</span><span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">toggle</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">"add"</span> <span class="token operator">:</span> <span class="token string">"remove"</span><span class="token punctuation">]</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token operator">!</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> oldValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">,</span> oldValue <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">/*|| false*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>replace <span class="token operator">||</span> <span class="token keyword">typeof</span> testClass<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"boolean"</span><span class="token punctuation">)</span>
        DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">replace</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oldToken<span class="token punctuation">,</span> newToken</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"replace"</span><span class="token punctuation">,</span> oldToken<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"replace"</span><span class="token punctuation">,</span> newToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> oldValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>oldToken<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">!==</span> oldValue <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>newToken<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>contains<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">contains</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>Len<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>forEach<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">forEach</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> Len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>Len<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>tArg<span class="token operator">=</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>tArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>entries<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">entries</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> nextIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> nextIndex<span class="token operator">&lt;</span>that<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token punctuation">[</span>nextIndex<span class="token punctuation">,</span> that<span class="token punctuation">[</span>nextIndex<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span>done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>values<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">values</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> nextIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> nextIndex<span class="token operator">&lt;</span>that<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> that<span class="token punctuation">[</span>nextIndex<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span>done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">keys</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> nextIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> nextIndex<span class="token operator">&lt;</span>that<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> nextIndex<span class="token operator">++</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span>done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
<h3 id="caveats">Caveats</h3>
<p>The polyfill is limited in functionality. It's currently unable to polyfill out-of-document-elements (e.g. elements created by <code>document.createElement</code> before they are appended to a parent node) in IE6-7.</p> <p>However, it should work just fine in IE9. A major discrepancy between the polyfilled version of <code>classList</code> and the W3 specs is that for IE6-8, there is no way to create an immutable object (an object whose properties cannot be directly modified). In IE9, however, it is possible through extending the prototype, freezing the visible object, and overwriting native property methods. However, such actions would not work in IE6-IE8 and, in IE9, slow the performance of the entire webpage to a snail's crawl, making these modifications completely impractical for this polyfill. </p> <p>A minor note is that in IE6-7, this polyfill uses the <code>window[" uCL"]</code> property on the window object for communicating with the CSS expressions, the <code>x-uCLp</code> css property on all elements, and the <code>element[" uCL"]</code> property on all elements to allow garbage collection and boost performance. In all polyfilled browsers (IE6-9), an additional <code>element[" uCLp"]</code> property is added to element to ensure standards compliant prototyping, and a <code>DOMTokenList[" uCL"]</code> property is added to each <code>element["classList"]</code> object to ensure that the DOMTokenList is bounded to its own element.</p>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td>
<a href="https://dom.spec.whatwg.org/#dom-element-classlist" hreflang="en" rel=" noopener">DOM<br><small>The definition of 'Element.classList' in that specification.</small></a> </td> <td><span class="spec-living">Living Standard</span></td> <td>Initial definition</td> </tr> <tr> <td><a href="https://www.w3.org/TR/dom/#dom-element-classlist" hreflang="en" rel=" noopener">DOM4<br><small>The definition of 'Element.classList' in that specification.</small></a></td> <td><span class="spec-obsolete">Obsolete</span></td> <td></td> </tr> </tbody> </table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>classList</code></th>
<td class="bc-supports-yes">
<div>22</div>
<div>8-22</div>
<div>Not supported for SVG elements.</div>
</td>
<td class="bc-supports-yes">
<div>16</div>
<div>12-16</div>
<div>Not supported for SVG elements.</div>
</td>
<td class="bc-supports-yes"><div>3.6</div></td>
<td class="bc-supports-yes">
<div>10</div>
<div>Not supported for SVG elements.</div>
</td>
<td class="bc-supports-yes"><div>11.5</div></td>
<td class="bc-supports-yes">
<div>6.1</div>
<div>6-6.1</div>
<div>Not supported for SVG elements.</div>
</td>
<td class="bc-supports-yes">
<div>4.4</div>
<div>3-4.4</div>
<div>Not supported for SVG elements.</div>
</td>
<td class="bc-supports-yes">
<div>25</div>
<div>18-25</div>
<div>Not supported for SVG elements.</div>
</td>
<td class="bc-supports-yes"><div>4</div></td>
<td class="bc-supports-yes"><div>11.5</div></td>
<td class="bc-supports-yes">
<div>7</div>
<div>5-7</div>
<div>Not supported for SVG elements.</div>
</td>
<td class="bc-supports-yes">
<div>1.5</div>
<div>1.0-1.5</div>
<div>Not supported for SVG elements.</div>
</td>
</tr>
<tr>
<th><code>add_and_remove_multiple_arguments</code></th>
<td class="bc-supports-yes"><div>24</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>26</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>7</div></td>
<td class="bc-supports-yes"><div>37</div></td>
<td class="bc-supports-yes"><div>25</div></td>
<td class="bc-supports-yes"><div>26</div></td>
<td class="bc-supports-yes"><div>14</div></td>
<td class="bc-supports-yes"><div>7</div></td>
<td class="bc-supports-yes"><div>1.5</div></td>
</tr>
<tr>
<th><code>replace</code></th>
<td class="bc-supports-yes"><div>61</div></td>
<td class="bc-supports-yes"><div>17</div></td>
<td class="bc-supports-yes"><div>49</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>?</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>61</div></td>
<td class="bc-supports-yes"><div>61</div></td>
<td class="bc-supports-yes"><div>49</div></td>
<td class="bc-supports-yes"><div>?</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>8.0</div></td>
</tr>
<tr>
<th><code>toggle_method_second_argument</code></th>
<td class="bc-supports-yes"><div>24</div></td>
<td class="bc-supports-yes"><div>12</div></td>
<td class="bc-supports-yes"><div>24</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>7</div></td>
<td class="bc-supports-yes"><div>37</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>24</div></td>
<td class="bc-supports-yes"><div>?</div></td>
<td class="bc-supports-yes"><div>7</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
</tr>
</tbody>
</table>


<h2 id="see_also">See also</h2>
<ul> <li><a href="classname"><code>element.className</code></a></li> <li><a href="../domtokenlist"><code>DOMTokenList</code></a></li> </ul>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/classList" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Element/classList</a>
  </p>
</div>
