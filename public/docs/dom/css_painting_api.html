<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/mdn-article.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/medium-basic-export.css">
<body>;
<h1>CSS Painting API</h1> <p>The CSS Painting API — part of the <a href="https://developer.mozilla.org/en-US/docs/Web/Houdini">CSS Houdini</a> umbrella of APIs — allows developers to write JavaScript functions that can draw directly into an element's background, border, or content.</p>
<h2 id="concepts_and_usage">Concepts and usage</h2>
<p>Essentially, the CSS Painting API contains functionality allowing developers to create custom values for <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/paint()"><code>paint()</code></a>, a CSS <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/image">&lt;image&gt;</a></code> function. You can then apply these values to properties like <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/background-image"><code>background-image</code></a> to set complex custom backgrounds on an element.</p> <p>For example:</p> <pre data-language="css"><span class="token selector">aside</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">paint</span><span class="token punctuation">(</span>myPaintedImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre> <p>The API defines <a href="paintworklet"><code>PaintWorklet</code></a>, a <a href="worklet"><code>worklet</code></a> that can be used to programmatically generate an image that responds to computed style changes. To find out more about how this is used, consult <a href="css_painting_api/guide">Using the CSS Painting API</a>.</p>
<h2 id="interfaces">Interfaces</h2>
<dl> <dt><a href="paintworklet"><code>PaintWorklet</code></a></dt> <dd>Programmatically generates an image where a CSS property expects a file. Access this interface through <a href="css/paintworklet"><code>CSS.paintWorklet</code></a>.</dd> <dt><a class="page-not-created"><code>PaintWorkletGlobalScope</code></a></dt> <dd>The global execution context of the <code>paintWorklet</code>.</dd> <dt><a class="page-not-created"><code>PaintRenderingContext2D</code></a></dt> <dd> <p>Implements a subset of the <a href="canvasrenderingcontext2d">CanvasRenderingContext2D API</a>. It has an output bitmap that is the size of the object it is rendering to.</p> </dd> <dt><a class="page-not-created"><code>PaintSize</code></a></dt> <dd>Returns the read-only values of the output bitmap's width and height.</dd> </dl>
<h2 id="dictionaries">Dictionaries</h2>
<dl> <dt><a class="page-not-created"><code>PaintRenderingContext2DSettings</code></a></dt> <dd>A dictionary providing a subset of <a href="canvasrenderingcontext2d">CanvasRenderingContext2D</a> settings.</dd> </dl>
<h2 id="examples">Examples</h2>
<p>To draw directly into an element's background using JavaScript in our CSS, we define a paint worklet using the <code><a href="paintworklet/registerpaint">registerPaint()</a></code> function, tell the document to include the worklet using the paintWorklet addModule() method, then include the image we created using the CSS <code><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/paint()">paint()</a></code> function.</p> <p>We create our PaintWorklet called 'hollowHighlights' using the <code><a href="paintworklet/registerpaint">registerPaint()</a></code> function:</p> <pre data-language="js"><span class="token function">registerPaint</span><span class="token punctuation">(</span><span class="token string">'hollowHighlights'</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token punctuation">{</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">inputProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'--boxColor'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">inputArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">,</span><span class="token string">'&lt;length&gt;'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">contextOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>alpha<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token function">paint</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> size<span class="token punctuation">,</span> props<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> y <span class="token operator">=</span> size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> blockWidth <span class="token operator">=</span> size<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.33</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> blockHeight <span class="token operator">=</span> size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.85</span><span class="token punctuation">;</span>

		<span class="token keyword">const</span> theColor <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span> <span class="token string">'--boxColor'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> strokeType <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> strokeWidth <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>theColor<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> strokeWidth <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> strokeWidth<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> strokeType <span class="token operator">===</span> <span class="token string">'stroke'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'transparent'</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> theColor<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> strokeType <span class="token operator">===</span> <span class="token string">'filled'</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> theColor<span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> theColor<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> blockWidth<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> blockWidth <span class="token operator">+</span> blockHeight<span class="token punctuation">,</span> blockHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> blockHeight <span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> x<span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">let</span> start <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span> blockWidth <span class="token operator">+</span> <span class="token punctuation">(</span>start <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> blockWidth <span class="token operator">+</span> <span class="token punctuation">(</span>start <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> blockWidth <span class="token operator">+</span> <span class="token punctuation">(</span>start <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">20</span> <span class="token operator">+</span> blockHeight<span class="token punctuation">,</span> blockHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> blockWidth <span class="token operator">+</span> <span class="token punctuation">(</span>start <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> blockHeight<span class="token punctuation">,</span> blockHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span> blockWidth <span class="token operator">+</span> <span class="token punctuation">(</span>start <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre>  <p>We then include the paintWorklet:</p>  <pre data-language="js">  <span class="token constant">CSS</span><span class="token punctuation">.</span>paintWorklet<span class="token punctuation">.</span><span class="token function">addModule</span><span class="token punctuation">(</span><span class="token string">'https://mdn.github.io/houdini-examples/cssPaint/intro/worklets/hilite.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre> <p>Then we can use the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/image"><code>&lt;image&gt;</code></a> with the CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/paint()"><code>paint()</code></a> function:</p> <pre data-language="css"><span class="token selector">li</span> <span class="token punctuation">{</span>
   <span class="token property">--boxColor</span><span class="token punctuation">:</span> <span class="token function">hsla</span><span class="token punctuation">(</span>55<span class="token punctuation">,</span> 90%<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 1.0<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">paint</span><span class="token punctuation">(</span>hollowHighlights<span class="token punctuation">,</span> stroke<span class="token punctuation">,</span> 2px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">li:nth-of-type(3n)</span> <span class="token punctuation">{</span>
   <span class="token property">--boxColor</span><span class="token punctuation">:</span> <span class="token function">hsla</span><span class="token punctuation">(</span>155<span class="token punctuation">,</span> 90%<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 1.0<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">paint</span><span class="token punctuation">(</span>hollowHighlights<span class="token punctuation">,</span> filled<span class="token punctuation">,</span>  3px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">li:nth-of-type(3n+1)</span> <span class="token punctuation">{</span>
   <span class="token property">--boxColor</span><span class="token punctuation">:</span> <span class="token function">hsla</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 90%<span class="token punctuation">,</span> 60%<span class="token punctuation">,</span> 1.0<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">paint</span><span class="token punctuation">(</span>hollowHighlights<span class="token punctuation">,</span> stroke<span class="token punctuation">,</span> 1px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre>  <p>We've included a custom property in the selector block defining a boxColor. Custom properties are accessible to the PaintWorklet.</p> <p><iframe class="sample-code-frame" id="frame_hollowExample" width="300" height="300" src="https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/CSS_Painting_API/_samples_/hollowExample" loading="lazy"></iframe></p>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://drafts.css-houdini.org/css-paint-api-1/" hreflang="en" rel=" noopener">CSS Painting API Level 1</a></td> <td><span class="spec-wd">Working Draft</span></td> <td>Initial definition.</td> </tr> </tbody> </table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<h2 id="see_also">See also</h2>
<ul> <li><a href="css_painting_api/guide">Using the CSS Painting API</a></li> <li><a href="css_typed_om_api">CSS Typed Object Model API</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Houdini">CSS Houdini</a></li> </ul>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Painting_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/CSS_Painting_API</a>
  </p>
</div>
</body></html>
