<h1>RTCPeerConnection.onaddstream</h1>

<div class="notecard deprecated"> <strong id="deprecated">Deprecated</strong> <p>This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p> </div>
 <p>The <code><strong>RTCPeerConnection.onaddstream</strong></code> event handler is a property containing the code to execute when the <code><a href="addstream_event">addstream</a></code> event, of type <a href="../mediastreamevent"><code>MediaStreamEvent</code></a>, is received by this <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a>. Such an event is sent when a <a href="../mediastream"><code>MediaStream</code></a> is added to this connection by the remote peer. The event is sent immediately after the call <a href="setremotedescription"><code>setRemoteDescription()</code></a> and doesn't wait for the result of the SDP negotiation.</p> <div class="warning notecard"> <p><strong>Important:</strong> This property has been <strong>removed</strong> from the specification; you should now use <a href="ontrack"><code>RTCPeerConnection.ontrack</code></a> to watch for <code><a href="track_event">track</a></code> events instead. It is included here in order to help you adapt existing code and understand existing samples, which may not be up-to-date yet.</p> </div>
<h2 id="syntax">Syntax</h2>
<pre data-language="js">rtcPeerConnection<span class="token punctuation">.</span>onaddstream <span class="token operator">=</span> eventHandler<span class="token punctuation">;</span>
</pre>
<h3 id="value">Value</h3>
<p>A function which handles <code><a href="addstream_event">addstream</a></code> events. These events, of type <a href="../mediastreamevent"><code>MediaStreamEvent</code></a>, are sent when streams are added to the connection by the remote peer. The first time an event occurs may be nearly immediately after the remote end of the connection is set using <a href="setremotedescription"><code>RTCPeerConnection.setRemoteDescription()</code></a>; it doesn't wait for a particular stream to be accepted or rejected using <a href="https://developer.mozilla.org/en-US/docs/Glossary/SDP">SDP</a> negotiation.</p>
<h2 id="example">Example</h2>
<p>This code, based on an older version of our <a href="../webrtc_api/signaling_and_video_calling">Signaling and video calling</a> sample, responds to <code><a href="addstream_event">addstream</a></code> events by setting the video source for a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video"><code>&lt;video&gt;</code></a> element to the stream specified in the event, and then enabling a "hang up" button in the app's user interface.</p> <pre data-language="js">pc<span class="token punctuation">.</span><span class="token function-variable function">onaddstream</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"received_video"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>srcObject <span class="token operator">=</span> event<span class="token punctuation">.</span>stream<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"hangup-button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre> <p>You can also use <a href="../eventtarget/addeventlistener"><code>addEventListener()</code></a> to add a handler for <code>addstream</code> events to an <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a>. </p>
<h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>onaddstream</code></th>
<td class="bc-supports-yes"><div>24</div></td>
<td class="bc-supports-yes"><div>15</div></td>
<td class="bc-supports-yes"><div>22</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-yes">
<div>43</div>
<div>Promise-based version.</div>
<div>37-43</div>
</td>
<td class="bc-supports-no"><div>11-12</div></td>
<td class="bc-supports-yes"><div>â‰¤37</div></td>
<td class="bc-supports-yes"><div>Yes</div></td>
<td class="bc-supports-yes"><div>44</div></td>
<td class="bc-supports-yes">
<div>43</div>
<div>Promise-based version.</div>
<div>37-43</div>
</td>
<td class="bc-supports-no"><div>11-12</div></td>
<td class="bc-supports-yes"><div>6.0</div></td>
</tr></tbody>
</table>
<div class="warning notecard"> <p><strong>Important:</strong> This property has been <strong>removed</strong> from the specification; you should now use <a href="ontrack"><code>RTCPeerConnection.ontrack</code></a> to watch for <code><a href="track_event">track</a></code> events instead. It is included here in order to help you adapt existing code and understand existing samples, which may not be up-to-date yet.</p> </div> 

<h2 id="see_also">See also</h2>
<ul> <li>Use the newer <code><a href="track_event">track</a></code> event, its type <a href="../rtctrackevent"><code>RTCTrackEvent</code></a>, and the <a href="ontrack"><code>RTCPeerConnection.ontrack</code></a> event handler property instead of this. </li> <li>The <code><a href="addstream_event">addstream</a></code> event and its type, <a href="../mediastreamevent"><code>MediaStreamEvent</code></a>.</li> </ul>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onaddstream" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/onaddstream</a>
  </p>
</div>
