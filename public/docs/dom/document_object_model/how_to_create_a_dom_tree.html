<h1>How to create a DOM tree</h1>

<div class="notecard draft"> <strong id="draft">Draft</strong> <p>This page is not complete.</p> </div>
 <p>This page describes how to use the <a href="https://www.w3.org/TR/DOM-Level-3-Core" rel=" noopener">DOM Core</a> API in JavaScript to create and modify DOM objects. It applies to all Gecko-based applications (such as Firefox) both in privileged (extensions) and unprivileged (web pages) code.</p>
<h3 id="dynamically_creating_a_dom_tree">Dynamically creating a DOM tree</h3>
<p>Consider the following XML document:</p> <pre data-language="xml"><span class="token prolog">&lt;?xml version="1.0"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>people</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>person</span> <span class="token attr-name">first-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>eric<span class="token punctuation">"</span></span> <span class="token attr-name">middle-initial</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>H<span class="token punctuation">"</span></span> <span class="token attr-name">last-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jung<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">street</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>321 south st<span class="token punctuation">"</span></span> <span class="token attr-name">city</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>denver<span class="token punctuation">"</span></span> <span class="token attr-name">state</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>co<span class="token punctuation">"</span></span> <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usa<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">street</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123 main st<span class="token punctuation">"</span></span> <span class="token attr-name">city</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>arlington<span class="token punctuation">"</span></span> <span class="token attr-name">state</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ma<span class="token punctuation">"</span></span> <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usa<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>person</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>person</span> <span class="token attr-name">first-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jed<span class="token punctuation">"</span></span> <span class="token attr-name">last-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>brown<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">street</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>321 north st<span class="token punctuation">"</span></span> <span class="token attr-name">city</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>atlanta<span class="token punctuation">"</span></span> <span class="token attr-name">state</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ga<span class="token punctuation">"</span></span> <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usa<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">street</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123 west st<span class="token punctuation">"</span></span> <span class="token attr-name">city</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>seattle<span class="token punctuation">"</span></span> <span class="token attr-name">state</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wa<span class="token punctuation">"</span></span> <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usa<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">street</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>321 south avenue<span class="token punctuation">"</span></span> <span class="token attr-name">city</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>denver<span class="token punctuation">"</span></span> <span class="token attr-name">state</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>co<span class="token punctuation">"</span></span> <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usa<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>person</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>people</span><span class="token punctuation">&gt;</span></span>
</pre> <p>The W3C DOM API, supported by Mozilla, can be used to create an in-memory representation of this document like so:</p> <pre data-language="js"><span class="token keyword">var</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">createDocument</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> peopleElem <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"people"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> personElem1 <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"first-name"</span><span class="token punctuation">,</span> <span class="token string">"eric"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"middle-initial"</span><span class="token punctuation">,</span> <span class="token string">"h"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"last-name"</span><span class="token punctuation">,</span> <span class="token string">"jung"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> addressElem1 <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"street"</span><span class="token punctuation">,</span> <span class="token string">"321 south st"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span> <span class="token string">"denver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token string">"co"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"country"</span><span class="token punctuation">,</span> <span class="token string">"usa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>addressElem1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> addressElem2 <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"street"</span><span class="token punctuation">,</span> <span class="token string">"123 main st"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span> <span class="token string">"arlington"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token string">"ma"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"country"</span><span class="token punctuation">,</span> <span class="token string">"usa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>addressElem2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> personElem2 <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"first-name"</span><span class="token punctuation">,</span> <span class="token string">"jed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem2<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"last-name"</span><span class="token punctuation">,</span> <span class="token string">"brown"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> addressElem3 <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem3<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"street"</span><span class="token punctuation">,</span> <span class="token string">"321 north st"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem3<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span> <span class="token string">"atlanta"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem3<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token string">"ga"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem3<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"country"</span><span class="token punctuation">,</span> <span class="token string">"usa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem2<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>addressElem3<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> addressElem4 <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem4<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"street"</span><span class="token punctuation">,</span> <span class="token string">"123 west st"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem4<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span> <span class="token string">"seattle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem4<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token string">"wa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem4<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"country"</span><span class="token punctuation">,</span> <span class="token string">"usa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem2<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>addressElem4<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> addressElem5 <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem5<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"street"</span><span class="token punctuation">,</span> <span class="token string">"321 south avenue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem5<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span> <span class="token string">"denver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem5<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> <span class="token string">"co"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
addressElem5<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"country"</span><span class="token punctuation">,</span> <span class="token string">"usa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
personElem2<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>addressElem5<span class="token punctuation">)</span><span class="token punctuation">;</span>

peopleElem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>personElem1<span class="token punctuation">)</span><span class="token punctuation">;</span>
peopleElem<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>personElem2<span class="token punctuation">)</span><span class="token punctuation">;</span>
doc<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>peopleElem<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre> <p>See also the <a href="https://developer.mozilla.org/en-US/docs/XUL_Tutorial/Document_Object_Model"> DOM chapter of the XUL Tutorial</a>.</p> <p>You can automate the creation of a DOM tree using a <a href="https://developer.mozilla.org/en-US/docs/JXON#JXON_reverse_algorithms">JXON reverse algorithm</a> in association with the following JSON representation:</p> <pre data-language="js"><span class="token punctuation">{</span>
  <span class="token string">"people"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">"person"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token string">"address"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token string">"@street"</span><span class="token operator">:</span> <span class="token string">"321 south st"</span><span class="token punctuation">,</span>
        <span class="token string">"@city"</span><span class="token operator">:</span> <span class="token string">"denver"</span><span class="token punctuation">,</span>
        <span class="token string">"@state"</span><span class="token operator">:</span> <span class="token string">"co"</span><span class="token punctuation">,</span>
        <span class="token string">"@country"</span><span class="token operator">:</span> <span class="token string">"usa"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string">"@street"</span><span class="token operator">:</span> <span class="token string">"123 main st"</span><span class="token punctuation">,</span>
        <span class="token string">"@city"</span><span class="token operator">:</span> <span class="token string">"arlington"</span><span class="token punctuation">,</span>
        <span class="token string">"@state"</span><span class="token operator">:</span> <span class="token string">"ma"</span><span class="token punctuation">,</span>
        <span class="token string">"@country"</span><span class="token operator">:</span> <span class="token string">"usa"</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"@first-name"</span><span class="token operator">:</span> <span class="token string">"eric"</span><span class="token punctuation">,</span>
      <span class="token string">"@middle-initial"</span><span class="token operator">:</span> <span class="token string">"H"</span><span class="token punctuation">,</span>
      <span class="token string">"@last-name"</span><span class="token operator">:</span> <span class="token string">"jung"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token string">"address"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token string">"@street"</span><span class="token operator">:</span> <span class="token string">"321 north st"</span><span class="token punctuation">,</span>
        <span class="token string">"@city"</span><span class="token operator">:</span> <span class="token string">"atlanta"</span><span class="token punctuation">,</span>
        <span class="token string">"@state"</span><span class="token operator">:</span> <span class="token string">"ga"</span><span class="token punctuation">,</span>
        <span class="token string">"@country"</span><span class="token operator">:</span> <span class="token string">"usa"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string">"@street"</span><span class="token operator">:</span> <span class="token string">"123 west st"</span><span class="token punctuation">,</span>
        <span class="token string">"@city"</span><span class="token operator">:</span> <span class="token string">"seattle"</span><span class="token punctuation">,</span>
        <span class="token string">"@state"</span><span class="token operator">:</span> <span class="token string">"wa"</span><span class="token punctuation">,</span>
        <span class="token string">"@country"</span><span class="token operator">:</span> <span class="token string">"usa"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string">"@street"</span><span class="token operator">:</span> <span class="token string">"321 south avenue"</span><span class="token punctuation">,</span>
        <span class="token string">"@city"</span><span class="token operator">:</span> <span class="token string">"denver"</span><span class="token punctuation">,</span>
        <span class="token string">"@state"</span><span class="token operator">:</span> <span class="token string">"co"</span><span class="token punctuation">,</span>
        <span class="token string">"@country"</span><span class="token operator">:</span> <span class="token string">"usa"</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"@first-name"</span><span class="token operator">:</span> <span class="token string">"jed"</span><span class="token punctuation">,</span>
      <span class="token string">"@last-name"</span><span class="token operator">:</span> <span class="token string">"brown"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
<h3 id="so_what.3f">So what?</h3>
<p>DOM trees can be <a href="https://developer.mozilla.org/en-US/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript"> queried using XPath expressions</a>, converted to strings or written to a local or remote files using <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Parsing_and_serializing_XML"> XMLSerializer</a> (without having to first convert to a string), <a href="../xmlhttprequest">POSTed to a web server</a> (via <code>XMLHttpRequest</code>), transformed using <a href="https://developer.mozilla.org/en-US/docs/Web/XSLT">XSLT</a>, <a href="https://developer.mozilla.org/en-US/docs/Glossary/XLink">XLink</a>, converted to a JavaScript object through a <a href="https://developer.mozilla.org/en-US/docs/JXON">JXON algorithm</a>, etc.</p> <p>You can use DOM trees to model data which isn't well-suited for RDF (or perhaps you just don't like RDF). Another application is that, since XUL is XML, the UI of your application can be dynamically manipulated, downloaded, uploaded, saved, loaded, converted, or transformed quite easily.</p>
<h2 id="see_also">See also</h2>
<ul> <li><a class="internal" href="https://developer.mozilla.org/en-US/docs/Web/XML">XML</a></li> <li><a class="internal" href="https://developer.mozilla.org/en-US/docs/JXON">JXON</a></li> <li><a class="internal" href="https://developer.mozilla.org/en-US/docs/Web/XPath">XPath</a></li> <li><a class="internal" href="https://developer.mozilla.org/en-US/docs/E4X">E4X (ECMAScript for XML)</a></li> <li><a class="internal" href="https://developer.mozilla.org/en-US/docs/Web/Guide/Parsing_and_serializing_XML">Parsing and serializing XML</a></li> <li><a class="internal" href="../xmlhttprequest">XMLHttpRequest</a></li> </ul>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/How_to_create_a_DOM_tree" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/How_to_create_a_DOM_tree</a>
  </p>
</div>
